# Nekoray Windows æ„å»ºæŒ‡å—

## ğŸ“‹ å¿…é¡»å‡†å¤‡

### å¿…éœ€è½¯ä»¶
- **Python 3.x**: ä» [python.org](https://www.python.org/downloads/) ä¸‹è½½
- **Visual Studio 2019/2022**: å®‰è£… "ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘" å·¥ä½œè´Ÿè½½
- **CMake 3.10+**: `winget install --id Kitware.CMake`
- **Git**: ä» [git-scm.com](https://git-scm.com/download/win) ä¸‹è½½
- **Qt 6.5 SDK**: ä¸‹è½½å¹¶è§£å‹åˆ° `qt_lib/qt650` ç›®å½•
  - ä¸‹è½½åœ°å€: https://github.com/MatsuriDayo/nekoray_qt_runtime/releases/download/20220503/Qt6.5.0-Windows-x86_64-VS2022-17.5.5-20230507.7z
- **Ninja** (å¯é€‰): `winget install --id Ninja-build.Ninja`

### ç›®å½•ç»“æ„
```
nekoray/
â”œâ”€â”€ qt_lib/
â”‚   â””â”€â”€ qt650/          # Qt SDK è§£å‹åˆ°è¿™é‡Œ
â””â”€â”€ build_windows.py
```

## ğŸš€ æ„å»ºæ­¥éª¤

```powershell
# 1. å…‹éš†ä»“åº“
git clone https://github.com/MatsuriDayo/nekoray.git
cd nekoray

# 2. å‡†å¤‡ Qt SDKï¼ˆè§£å‹åˆ° qt_lib/qt650ï¼‰

# 3. è¿è¡Œæ„å»ºè„šæœ¬
python build_windows.py
```

**æ„å»ºæ—¶é—´**: é¦–æ¬¡çº¦ 30-60 åˆ†é’Ÿï¼Œåç»­çº¦ 5-15 åˆ†é’Ÿ

## ğŸ“¦ ç»“æœäº§ç‰©

### ä¸»è¦æ–‡ä»¶
- **`nekobox.exe`**: é¡¹ç›®æ ¹ç›®å½•ï¼ˆä¸»ç¨‹åºï¼‰
- **`build/Release/nekobox.exe`**: æ„å»ºç›®å½•ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶

### ä¾èµ–æ–‡ä»¶ï¼ˆä½äº `build/Release/`ï¼‰
- **Qt DLL**: `Qt6Core.dll`, `Qt6Gui.dll`, `Qt6Network.dll`, `Qt6Widgets.dll` ç­‰
- **OpenSSL DLL**: `libcrypto-3-x64.dll`, `libssl-3-x64.dll`
- **èµ„æºæ–‡ä»¶**: `geoip.dat`, `geosite.dat`, `geoip.db`, `geosite.db`
- **æ ¸å¿ƒç»„ä»¶**: `nekobox_core.exe`ï¼ˆå¦‚æœä¸‹è½½æˆåŠŸï¼‰

### ä¾èµ–åº“ç¼“å­˜ï¼ˆä½äº `libs/deps/built/`ï¼‰
- `lib/yaml-cpp.lib`
- `lib/ZXing.lib`
- `lib/libprotobuf.lib`
- `bin/protoc.exe`

## âœ… éªŒè¯æ„å»º

```powershell
cd build\Release
.\nekobox.exe
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Qt SDK æœªæ‰¾åˆ°
ç¡®ä¿ Qt 6.5 SDK å·²è§£å‹åˆ° `qt_lib/qt650` ç›®å½•

### DLL ç¼ºå¤±
```powershell
cd build\Release
..\..\qt_lib\qt650\bin\windeployqt.exe nekobox.exe
Copy-Item ..\..\qt_lib\qt650\bin\libcrypto-3-x64.dll -Destination .
Copy-Item ..\..\qt_lib\qt650\bin\libssl-3-x64.dll -Destination .
```

### æ¸…ç†æ„å»º
```powershell
Remove-Item -Path build,build_ninja,nekobox.exe -Recurse -Force -ErrorAction SilentlyContinue
```

## ğŸ“š ç›¸å…³æ–‡æ¡£
- æ ¸å¿ƒç»„ä»¶æ„å»º: `docs/Build_Core.md`
- Linux æ„å»º: `docs/Build_Linux.md`
